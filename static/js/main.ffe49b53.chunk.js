(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{128:function(e){e.exports=JSON.parse('{"a":"https://dosasm.github.io/dosrun"}')},145:function(e,t,n){},147:function(e,t,n){},491:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(9),c=n.n(o),r=(n(145),n(13)),i=n.n(r),u=n(27),l=n(43),d=n(58),m=(n(147),n(6)),b=null;function f(e){var t=Object(a.useRef)(null),n=Object(a.useState)(null),s=Object(l.a)(n,2),o=s[0],c=s[1];return Object(a.useEffect)((function(){if(null!==t&&null!==t.current){var e=t.current,n=emulatorsUi.dom.layers(e);return c(n),n.showLoadingLayer(),function(){b&&b.exit()}}}),[t]),Object(a.useEffect)((function(){null!==o&&emulators.dosboxWorker(e.bundle).then((function(e){b=e,o.hideLoadingLayer(),emulatorsUi.graphics.webGl(o,b),emulatorsUi.controls.mouse(o,b),emulatorsUi.sound.audioNode(b),emulatorsUi.controls.options(o,["default"],(function(){}),54,13.5,0)}));return function(){b&&b.exit()}}),[o,e.bundle]),Object(m.jsx)("div",{ref:t,tabIndex:0,onBlur:function(e){if(o&&b){emulatorsUi.controls.keyboard(o,{sendKeyEvent:function(){}},{})}},onFocus:function(e){o&&b&&emulatorsUi.controls.keyboard(o,b,{})}})}var h=n(524),p=n(527),j=n(526),x=n(528),C=n(525),g=n(134),v=n(126),O=n(127),T=n(46),A=n.n(T),k=n(128),P=function(){function e(){Object(v.a)(this,e),this.zip=new A.a,this.zip=new A.a,this.zip.file(".jsdos/dosbox.conf","[AUTOEXEC]")}return Object(O.a)(e,[{key:"download",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(k.a),e.next=3,fetch(n.pathname+t);case 3:if(200!==(a=e.sent).status&&0!==a.status){e.next=12;break}return e.next=7,a.blob();case 7:return s=e.sent,e.next=10,A.a.loadAsync(s);case 10:return this.zip=e.sent,e.abrupt("return",this.zip);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBundle",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.zip){e.next=8;break}return a=this.zip,t&&a.file(".jsdos/dosbox.conf","[AUTOEXEC]\n"+t.join("\n")),n&&a.file(n.path,n.text),e.next=6,a.generateAsync({type:"uint8array"});case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.zip){e.next=2;break}return e.abrupt("return",null===(n=this.zip.file(t))||void 0===n?void 0:n.async("string"));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var w=n(492),y=n(523);function z(e){var t=e.baseOptions,n=e.options,a=e.onClick,s=t.map((function(e,t){return Object(m.jsx)(w.a,{onClick:function(e){a(-1*(t+1))},children:e},"baseOptions-"+e)})),o=n.map((function(e,t){return Object(m.jsx)(w.a,{onClick:function(e){a(t)},children:e},"options"+e)}));return Object(m.jsx)("div",{style:{float:"right"},children:Object(m.jsxs)(y.a,{color:"default",variant:"outlined","aria-label":"outlined primary button group",children:[o,s]})})}var M=new P;var H=function(){var e=new URL(document.location.toString()).searchParams,t={env:0,code:"",envBaseCode:!0};if(e.has("env")){var n=d.a.findIndex((function(t){var n;return t.label===(null===(n=e.get("env"))||void 0===n?void 0:n.replace(/[ |_|-]/," "))}));n>=0&&(t.env=n)}var s=Object(a.useState)(t.env),o=Object(l.a)(s,2),c=o[0],r=o[1],b=d.a[c],v=b.CodeLanguage,O=Object(a.useState)(t.code),T=Object(l.a)(O,2),A=T[0],k=T[1],P=Object(a.useState)(void 0),w=Object(l.a)(P,2),y=w[0],H=w[1];Object(a.useEffect)((function(){M.download(b.baseBundle).then(Object(u.a)(i.a.mark((function e(){var t,n,a,s,o,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URL(document.location.toString()).searchParams,n=void 0,!t.has("code")){e.next=6;break}n=t.get("code"),e.next=9;break;case 6:return e.next=8,M.readFile(b.CodePath);case 8:n=e.sent;case 9:if(a=!1,!n){e.next=21;break}if(k(n),!t.has("exec")){e.next=21;break}if(!((s=b.actions.findIndex((function(e){var n;return e.label.toLowerCase()===(null===(n=t.get("exec"))||void 0===n?void 0:n.toLowerCase())})))>=0)){e.next=21;break}return o=b.actions[s],e.next=18,M.getBundle(o.command,{path:o.CodeDestination,text:n});case 18:c=e.sent,H(c),a=!0;case 21:if(!1!==a){e.next=26;break}return e.next=24,M.getBundle();case 24:r=e.sent,H(r);case 26:case"end":return e.stop()}}),e)}))))}),[b,t.envBaseCode]);var S=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.actions[t],e.next=3,M.getBundle(n.command,{path:n.CodeDestination,text:A});case 3:(a=e.sent)&&H(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=window.screen,D=L.height,B=L.width;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(C.a,{container:!0,spacing:3,children:[Object(m.jsxs)(C.a,{item:!0,xs:12,className:"Control",children:[Object(m.jsx)("div",{style:{float:"left"},children:Object(m.jsxs)(h.a,{children:[Object(m.jsx)(p.a,{id:"select-jsdos-bundle-label",children:"environment"}),Object(m.jsx)(j.a,{labelId:"select-jsdos-bundle",id:"select-bundle",value:c,onChange:function(e){r(e.target.value)},children:d.a.map((function(e,t){return Object(m.jsx)(x.a,{value:t,children:e.label},e.label)}))})]})}),Object(m.jsx)("div",{style:{float:"right"},children:Object(m.jsx)(z,{baseOptions:["clean"],options:b.actions.map((function(e){return e.label})),onClick:function(e){return e<0?k(""):S(e)}})})]}),Object(m.jsx)(C.a,{item:!0,xs:D>B?12:6,className:"Dosbox",children:Object(m.jsx)("div",{style:{alignContent:"center"},children:void 0!==y?Object(m.jsx)(f,{bundle:y}):Object(m.jsx)(m.Fragment,{})})}),Object(m.jsx)(C.a,{item:!0,xs:D>B?12:6,className:"Editor",children:Object(m.jsx)(g.a,{autoFocus:!0,value:A,language:v,placeholder:"Please enter your code.",onChange:function(e){return k(e.target.value.replace(/\n/g,"\r\n"))},minHeight:80,padding:15,style:{fontSize:12,backgroundColor:"#f5f5f5",fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace"}})})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,530)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),o(e),c(e)}))};c.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(H,{})}),document.getElementById("root")),S()},58:function(e){e.exports=JSON.parse('{"a":[{"label":"MASM 6.11","description":"Microsoft Macro Assembler with MASM.exe 5.00 link.exe 3.60","baseBundle":"/bundles/MASM-v6.11.jsdos","CodeLanguage":"nasm","CodePath":"code/hello.asm","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","test.exe"]},{"label":"debug","zh-cn":"\u4f7f\u7528debug\u8c03\u8bd5","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","debug test.exe"]},{"label":"list","zh-cn":"\u751f\u6210lst\u6587\u4ef6","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm /la test.asm;"]}]},{"label":"MASM 5.00","description":"Microsoft Macro Assembler with MASM.exe 5.00 link.exe 3.60","baseBundle":"/bundles/MASM-v5.00.jsdos","CodeLanguage":"nasm","CodePath":"code/hello.asm","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","test.exe"]},{"label":"debug","zh-cn":"\u4f7f\u7528debug\u8c03\u8bd5","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","debug test.exe"]},{"label":"list","zh-cn":"\u751f\u6210lst\u6587\u4ef6","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm /la test.asm;"]}]},{"label":"TASM 4.1","description":"Borland\'s Turbo Assembler with tasm.exe 4.1 tlink.exe 7.1.30.1","baseBundle":"/bundles/TASM.jsdos","CodeLanguage":"nasm","CodePath":"code/hello.asm","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\tasm;%PATH%","d:","tasm test.asm;","tlink test.obj;","test.exe"]},{"label":"debug","zh-cn":"\u4f7f\u7528TD\u8c03\u8bd5","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\tasm;%PATH%","d:","tasm /zi test.asm","tlink /v/3 test.obj","TD test.exe"]},{"label":"list","zh-cn":"\u751f\u6210lst\u6587\u4ef6","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\tasm;%PATH%","d:","tasm /la test.asm;"]}]},{"label":"Turbo C 2.0(T)","description":"Turbo C 2.0 Compile code in Text Mode. From Gabriel Ortiz(gabrielortizamador@gmail.com)","baseBundle":"/bundles/TurboC.jsdos","CodeLanguage":"C","CodePath":"Code/Text.c","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.c","command":["mount c ./","mount d ./test/","d:","set PATH=C:\\\\TC;%PATH%","tcc Text.c","tcc -Ic:\\\\tc\\\\ -Lc:\\\\tc\\\\ d:test","test.exe"]}]},{"label":"Turbo C 2.0(G)","description":"Turbo C 2.0 Compile code in Graph Mode. From Gabriel Ortiz(gabrielortizamador@gmail.com)","baseBundle":"/bundles/TurboC.jsdos","CodeLanguage":"C","CodePath":"Code/Graphic.c","actions":[{"label":"run","zh-cn":"\u4f7f\u7528TD\u8c03\u8bd5","CodeDestination":"test/test.c","command":["mount c ./","mount d ./test/","set PATH=C:\\\\TC;%PATH%","d:","tcc -Ic:\\\\tc\\\\ -Lc:\\\\tc\\\\ d:\\\\test c:\\\\tc\\\\graphics.lib","test.exe"]}]}]}')}},[[491,1,2]]]);
//# sourceMappingURL=main.ffe49b53.chunk.js.map