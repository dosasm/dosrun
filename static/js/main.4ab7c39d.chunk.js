(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{124:function(e){e.exports=JSON.parse('{"a":"https://dosasm.github.io/dosrun"}')},142:function(e,t,n){},144:function(e,t,n){},451:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(10),c=n.n(s),r=(n(142),n(23)),i=n(16),l=n.n(i),u=n(34),d=n(19),b=n(72),m=(n(144),n(496)),h=n(489),j=n(118),f=n.n(j),p=n(4),x=null;function v(e){var t=Object(a.useRef)(null),n=Object(a.useState)(null),o=Object(d.a)(n,2),s=o[0],c=o[1],r=Object(a.useState)(),i=Object(d.a)(r,2),l=i[0],u=i[1];Object(a.useEffect)((function(){if(null!==t&&null!==t.current){var e=t.current,n=emulatorsUi.dom.layers(e);return c(n),n.showLoadingLayer(),function(){x&&x.exit()}}}),[t]),Object(a.useEffect)((function(){null!==s&&("dosboxDirect"===e.dosboxFunction?emulators.dosboxDirect(e.bundle):emulators.dosboxWorker(e.bundle)).then((function(e){x=e,s.hideLoadingLayer(),console.log("module get\ud83d\ude00",!!x.transport.module),emulatorsUi.graphics.webGl(s,x),emulatorsUi.controls.mouse(s,x),emulatorsUi.sound.audioNode(x),emulatorsUi.controls.options(s,["default"],(function(){}),54,13.5,0);var t=void 0,n=void 0;x.events().onStdout((function(e){n&&clearTimeout(n),e.includes(">type")&&(t=""),void 0!==t&&(n=setTimeout((function(){t&&t.length>50&&u(t),t=void 0}),1e3),t+=e)}))}));return function(){x&&x.exit()}}),[s,e.bundle,e.dosboxFunction]);var b=function(e){e.preventDefault()},j=function(e){e.preventDefault()};return Object(p.jsx)("div",{ref:t,tabIndex:0,onBlur:function(e){if(s&&x){emulatorsUi.controls.keyboard(s,{sendKeyEvent:function(){}},{})}document.removeEventListener("keyup",b,!0),document.removeEventListener("keydown",j,!0)},onFocus:function(e){s&&x&&emulatorsUi.controls.keyboard(s,x,{}),document.addEventListener("keyup",b,!0),document.addEventListener("keydown",j,!0)},children:l&&Object(p.jsxs)(m.a,{id:"type stdout hover",open:!0,anchorEl:t.current,children:[Object(p.jsx)(f.a,{onClick:function(){u(void 0)},style:{float:"right"}}),Object(p.jsx)(h.a,{children:"The full Content"}),Object(p.jsx)("textarea",{className:"popup-stdout",value:l,readOnly:!0,cols:80,rows:10})]})})}var C=n(494),g=n(500),O=n(495),y=n(499),k=n(128),T=n.n(k),A=n(129),w=n(14),P=n(45),z=n(55),S=n.n(z),D=n(124),L=function(){function e(){Object(w.a)(this,e),this.zip=new S.a,this.zip=new S.a,this.zip.file(".jsdos/dosbox.conf","[AUTOEXEC]")}return Object(P.a)(e,[{key:"download",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(D.a),e.next=3,fetch(n.pathname+t);case 3:if(200!==(a=e.sent).status&&0!==a.status){e.next=12;break}return e.next=7,a.blob();case 7:return o=e.sent,e.next=10,S.a.loadAsync(o);case 10:return this.zip=e.sent,e.abrupt("return",this.zip);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBundle",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.zip){e.next=8;break}return a=this.zip,t&&a.file(".jsdos/dosbox.conf","[AUTOEXEC]\n"+t.join("\n")),n&&(o=n.text.replace(/[^\x00-\x7F]/g,"").replace(/\r/g,"").replace(/\n/g,"\r\n"),a.file(n.path,o)),e.next=6,a.generateAsync({type:"uint8array"});case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readFile",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.zip){e.next=2;break}return e.abrupt("return",null===(n=this.zip.file(t))||void 0===n?void 0:n.async("string"));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var M=n(95),E=n(125),H=n(454),F=n(490),B=n(491),N=n(492),U=n(497),I=n(487),G=n(493),R=n(498),J=n(126),W=n.n(J);function X(e){var t="zh-CN"===navigator.language?"zh-CN":"label";if(window.screen.width<600)return function(e){var t=e.options,n=e.onClick,a=o.a.useState(!1),s=Object(d.a)(a,2),c=s[0],r=s[1],i=o.a.useRef(null),l=o.a.useState(2),u=Object(d.a)(l,2),b=u[0],m=u[1],h=function(){n(b),console.info("You clicked ".concat(t[b]))},j=function(e,t){m(t),r(!1)},f=function(){r((function(e){return!e}))},x=function(e){i.current&&i.current.contains(e.target)||r(!1)};return Object(p.jsx)(B.a,{container:!0,direction:"column",alignItems:"center",children:Object(p.jsxs)(B.a,{item:!0,xs:12,children:[Object(p.jsxs)(F.a,{className:"control-buttons",variant:"outlined",color:"primary",ref:i,"aria-label":"split button",children:[Object(p.jsx)(H.a,{onClick:h,children:t[b]}),Object(p.jsx)(H.a,{color:"primary",size:"small","aria-controls":c?"split-button-menu":void 0,"aria-expanded":c?"true":void 0,"aria-label":"select merge strategy","aria-haspopup":"menu",onClick:f,children:Object(p.jsx)(W.a,{})})]}),Object(p.jsx)(N.a,{open:c,anchorEl:i.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:99},children:function(e){var n=e.TransitionProps,a=e.placement;return Object(p.jsx)(U.a,Object(M.a)(Object(M.a)({},n),{},{style:{transformOrigin:"bottom"===a?"center top":"center bottom"},children:Object(p.jsx)(I.a,{children:Object(p.jsx)(G.a,{onClickAway:x,children:Object(p.jsx)(R.a,{id:"split-button-menu",children:t.map((function(e,t){return Object(p.jsx)(y.a,{selected:t===b,onClick:function(e){return j(e,t)},children:e})}))})})})}))}})]})})}({options:e.options.map((function(e){return e[t]})),onClick:function(t){e.options[t].action()}});var n,a=e.options,s=[],c=Object(E.a)(a);try{var r=function(){var e=n.value;s.push(Object(p.jsx)(H.a,{onClick:function(t){return e.action()},children:e[t]},"Options-"+e.name))};for(c.s();!(n=c.n()).done;)r()}catch(i){c.e(i)}finally{c.f()}return Object(p.jsx)(F.a,{className:"control-buttons",color:"default",variant:"text","aria-label":"outlined primary button group",children:s})}var Y=new L;var K=function(){var e=Object(a.useState)("dosboxWorker"),t=Object(d.a)(e,2),n=t[0],o=t[1],s=new URL(document.location.toString()).searchParams,c={env:0,code:"",envBaseCode:!0};if(s.has("env")){var i=b.a.findIndex((function(e){var t;return e.label===(null===(t=s.get("env"))||void 0===t?void 0:t.replace(/[ |_|-]/," "))}));i>=0&&(c.env=i)}var m=Object(a.useState)(c.env),j=Object(d.a)(m,2),f=j[0],x=j[1],k=b.a[f],w=k.CodeLanguage,P=Object(a.useState)(c.code),z=Object(d.a)(P,2),S=z[0],D=z[1],L=Object(a.useState)(void 0),M=Object(d.a)(L,2),E=M[0],H=M[1];Object(a.useEffect)((function(){Y.download(k.baseBundle).then(Object(u.a)(l.a.mark((function e(){var t,n,a,o,s,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URL(document.location.toString()).searchParams,n=void 0,!t.has("code")){e.next=6;break}n=t.get("code"),e.next=13;break;case 6:if(!k.CodePath){e.next=12;break}return e.next=9,Y.readFile(k.CodePath);case 9:n=e.sent,e.next=13;break;case 12:k.baseCode&&(n=k.baseCode);case 13:if(a=!1,!n){e.next=25;break}if(D(n),!t.has("exec")){e.next=25;break}if(!((o=k.actions.findIndex((function(e){var n;return e.label.toLowerCase()===(null===(n=t.get("exec"))||void 0===n?void 0:n.toLowerCase())})))>=0)){e.next=25;break}return s=k.actions[o],e.next=22,Y.getBundle(s.command,{path:s.CodeDestination,text:n});case 22:c=e.sent,H(c),a=!0;case 25:if(!1!==a){e.next=30;break}return e.next=28,Y.getBundle();case 28:r=e.sent,H(r);case 30:case"end":return e.stop()}}),e)}))))}),[k,c.envBaseCode]);var F=Object(p.jsxs)("div",{style:{float:"left"},children:[Object(p.jsxs)(C.a,{children:[Object(p.jsx)(g.a,{id:"select-jsdos-bundle-label",children:"environment"}),Object(p.jsx)(O.a,{labelId:"select-jsdos-bundle",id:"select-bundle",value:f,onChange:function(e){x(e.target.value)},children:b.a.map((function(e,t){return Object(p.jsx)(y.a,{value:t,children:e.label},e.label)}))})]}),Object(p.jsxs)(C.a,{id:"mode-selector",children:[Object(p.jsx)(g.a,{id:"select-mode-label",children:"Mode"}),Object(p.jsxs)(O.a,{id:"select-mode",value:n,onChange:function(e){o(e.target.value)},children:[Object(p.jsx)(y.a,{value:"dosboxWorker",children:"Worker"}),Object(p.jsx)(y.a,{value:"dosboxDirect",children:"Direct"})]})]})]}),B=[{name:"editor-clean",label:"clean","zh-CN":"\u6e05\u7a7a\u7f16\u8f91\u5668",action:function(){D("")}},{name:"editor-download",label:"download","zh-CN":"\u4f5c\u4e3a\u6587\u4ef6\u4e0b\u8f7d",action:function(){!function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}((new Date).toLocaleString()+"."+k.codeExt,S)}}].concat(Object(r.a)(k.actions.map((function(e,t){return{name:"exec-"+e.label,label:e.label,"zh-CN":e["zh-cn"],action:function(){var e=Object(u.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.actions[t],e.next=3,Y.getBundle(n.command,{path:n.CodeDestination,text:S});case 3:(a=e.sent)&&H(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}))));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"ground-Container",children:[Object(p.jsx)("div",{className:"ground-selectors",children:F}),Object(p.jsx)("div",{className:"ground-buttons",children:Object(p.jsx)(X,{options:B})}),Object(p.jsx)("div",{className:"ground-dosbox",children:void 0!==E?Object(p.jsx)(v,{bundle:E,dosboxFunction:n}):Object(p.jsx)(p.Fragment,{})}),Object(p.jsx)("div",{className:"ground-editor",children:Object(p.jsx)(A.a,{autoFocus:!0,value:S,language:w,placeholder:"Please enter your code.",onChange:function(e){return D(e.target.value)},minHeight:80,padding:15,style:{fontSize:12,backgroundColor:"#f5f5f5",fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace"}})})]}),Object(p.jsx)("footer",{children:Object(p.jsxs)(h.a,{children:[(new Date).getFullYear(),Object(p.jsx)("a",{href:"https://github.com/dosasm/dosrun/tree/main/react-app",children:Object(p.jsx)(T.a,{htmlColor:"black"})}),Object(p.jsx)("a",{href:"https://dosasm.github.io/docs/tutorial-playGround/playGround",children:"docs"})]})})]})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,501)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),s(e),c(e)}))};c.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(K,{})}),document.getElementById("root")),_()},72:function(e){e.exports=JSON.parse('{"a":[{"label":"MASM 6.11","description":"Microsoft Macro Assembler with MASM.exe 5.00 link.exe 3.60","baseBundle":"/bundles/MASM-v6.11.jsdos","codeExt":"asm","CodeLanguage":"nasm","CodePath":"code/hello.asm","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","test.exe"]},{"label":"debug","zh-cn":"\u4f7f\u7528debug\u8c03\u8bd5","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","debug test.exe"]},{"label":"list","zh-cn":"\u751f\u6210lst\u6587\u4ef6","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm /la test.asm;","type test.lst"]}]},{"label":"MASM 5.00","description":"Microsoft Macro Assembler with MASM.exe 5.00 link.exe 3.60","baseBundle":"/bundles/MASM-v5.00.jsdos","codeExt":"asm","CodeLanguage":"nasm","CodePath":"code/hello.asm","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","test.exe"]},{"label":"debug","zh-cn":"\u4f7f\u7528debug\u8c03\u8bd5","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","debug test.exe"]},{"label":"list","zh-cn":"\u751f\u6210lst\u6587\u4ef6","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm /la test.asm;","type test.lst"]}]},{"label":"TASM 4.1","description":"Borland\'s Turbo Assembler with tasm.exe 4.1 tlink.exe 7.1.30.1","baseBundle":"/bundles/TASM.jsdos","codeExt":"asm","CodeLanguage":"nasm","CodePath":"code/hello.asm","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\tasm;%PATH%","d:","tasm test.asm;","tlink test.obj;","test.exe"]},{"label":"debug","zh-cn":"\u4f7f\u7528TD\u8c03\u8bd5","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\tasm;%PATH%","d:","tasm /zi test.asm","tlink /v/3 test.obj","TD test.exe"]},{"label":"list","zh-cn":"\u751f\u6210lst\u6587\u4ef6","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\tasm;%PATH%","d:","tasm /la test.asm;","type test.lst"]}]},{"label":"batch","description":"use a empty jsdos bundle, we can run batch file","baseBundle":"/bundles/empty.jsdos","codeExt":"bat","CodeLanguage":"bat","baseCode":"echo hello jsdos","actions":[{"label":"run","zh-cn":"\u8fd0\u884cBAT","CodeDestination":"test/test.bat","command":["mount c ./","mount d ./test/","d:","test.bat"]}]},{"label":"Turbo C 2.0(T)","description":"Turbo C 2.0 Compile code in Text Mode. From Gabriel Ortiz(gabrielortizamador@gmail.com)","baseBundle":"/bundles/TurboC.jsdos","CodeLanguage":"C","CodePath":"Code/Text.c","codeExt":"c","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.c","command":["mount c ./","mount d ./test/","d:","set PATH=C:\\\\TC;%PATH%","tcc Text.c","tcc -Ic:\\\\tc\\\\ -Lc:\\\\tc\\\\ d:test","test.exe"]}]},{"label":"Turbo C 2.0(G)","description":"Turbo C 2.0 Compile code in Graph Mode. From Gabriel Ortiz(gabrielortizamador@gmail.com)","baseBundle":"/bundles/TurboC.jsdos","CodeLanguage":"C","CodePath":"Code/Graphic.c","codeExt":"c","actions":[{"label":"run","zh-cn":"\u4f7f\u7528TD\u8c03\u8bd5","CodeDestination":"test/test.c","command":["mount c ./","mount d ./test/","set PATH=C:\\\\TC;%PATH%","d:","tcc -Ic:\\\\tc\\\\ -Lc:\\\\tc\\\\ d:\\\\test c:\\\\tc\\\\graphics.lib","test.exe"]}]}]}')}},[[451,1,2]]]);
//# sourceMappingURL=main.4ab7c39d.chunk.js.map