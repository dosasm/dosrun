(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{117:function(e){e.exports=JSON.parse('{"a":"https://dosasm.github.io/dosrun"}')},129:function(e,t,n){},131:function(e,t,n){},441:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(10),c=n.n(o),r=(n(129),n(15)),i=n.n(r),u=n(31),l=n(23),d=n(69),m=(n(131),n(483)),b=n(479),f=n(111),p=n.n(f),h=n(5),j=null;function v(e){var t=Object(a.useRef)(null),n=Object(a.useState)(null),s=Object(l.a)(n,2),o=s[0],c=s[1],r=Object(a.useState)(),i=Object(l.a)(r,2),u=i[0],d=i[1];Object(a.useEffect)((function(){if(null!==t&&null!==t.current){var e=t.current,n=emulatorsUi.dom.layers(e);return c(n),n.showLoadingLayer(),function(){j&&j.exit()}}}),[t]),Object(a.useEffect)((function(){null!==o&&emulators.dosboxWorker(e.bundle).then((function(e){j=e,o.hideLoadingLayer(),emulatorsUi.graphics.webGl(o,j),emulatorsUi.controls.mouse(o,j),emulatorsUi.sound.audioNode(j),emulatorsUi.controls.options(o,["default"],(function(){}),54,13.5,0);var t=void 0,n=void 0;j.events().onStdout((function(e){n&&clearTimeout(n),e.includes(">type")&&(t=""),void 0!==t&&(n=setTimeout((function(){t&&t.length>50&&d(t),t=void 0}),1e3),t+=e)}))}));return function(){j&&j.exit()}}),[o,e.bundle]);var f=function(e){e.preventDefault()},v=function(e){e.preventDefault()};return Object(h.jsx)("div",{ref:t,tabIndex:0,onBlur:function(e){if(o&&j){emulatorsUi.controls.keyboard(o,{sendKeyEvent:function(){}},{})}document.removeEventListener("keyup",f,!0),document.removeEventListener("keydown",v,!0)},onFocus:function(e){o&&j&&emulatorsUi.controls.keyboard(o,j,{}),document.addEventListener("keyup",f,!0),document.addEventListener("keydown",v,!0)},onClick:function(){d(void 0)},children:u&&Object(h.jsxs)(m.a,{id:"type stdout hover",open:!0,anchorEl:t.current,children:[Object(h.jsx)(p.a,{onClick:function(){d(void 0)},style:{float:"right"}}),Object(h.jsx)(b.a,{children:"The full Content"}),Object(h.jsx)("textarea",{className:"popup-stdout",value:u,readOnly:!0,cols:80,rows:10})]})})}var x=n(481),C=n(484),g=n(482),O=n(485),T=n(118),k=n(14),y=n(44),A=n(54),P=n.n(A),w=n(117),z=function(){function e(){Object(k.a)(this,e),this.zip=new P.a,this.zip=new P.a,this.zip.file(".jsdos/dosbox.conf","[AUTOEXEC]")}return Object(y.a)(e,[{key:"download",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(w.a),e.next=3,fetch(n.pathname+t);case 3:if(200!==(a=e.sent).status&&0!==a.status){e.next=12;break}return e.next=7,a.blob();case 7:return s=e.sent,e.next=10,P.a.loadAsync(s);case 10:return this.zip=e.sent,e.abrupt("return",this.zip);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBundle",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.zip){e.next=8;break}return a=this.zip,t&&a.file(".jsdos/dosbox.conf","[AUTOEXEC]\n"+t.join("\n")),n&&(s=n.text.replace(/[^\x00-\x7F]/g,"").replace(/\r/g,"").replace(/\n/g,"\r\n"),a.file(n.path,s)),e.next=6,a.generateAsync({type:"uint8array"});case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.zip){e.next=2;break}return e.abrupt("return",null===(n=this.zip.file(t))||void 0===n?void 0:n.async("string"));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var M=n(443),L=n(480);function H(e){var t=e.baseOptions,n=e.options,a=e.onClick,s=t.map((function(e,t){return Object(h.jsx)(M.a,{onClick:function(e){a(-1*(t+1))},children:e},"baseOptions-"+e)})),o=n.map((function(e,t){return Object(h.jsx)(M.a,{onClick:function(e){a(t)},children:e},"options"+e)}));return Object(h.jsx)("div",{style:{float:"right"},children:Object(h.jsxs)(L.a,{color:"default",variant:"outlined","aria-label":"outlined primary button group",children:[o,s]})})}var S=new z;var D=function(){var e=new URL(document.location.toString()).searchParams,t={env:0,code:"",envBaseCode:!0};if(e.has("env")){var n=d.a.findIndex((function(t){var n;return t.label===(null===(n=e.get("env"))||void 0===n?void 0:n.replace(/[ |_|-]/," "))}));n>=0&&(t.env=n)}var s=Object(a.useState)(t.env),o=Object(l.a)(s,2),c=o[0],r=o[1],m=d.a[c],b=m.CodeLanguage,f=Object(a.useState)(t.code),p=Object(l.a)(f,2),j=p[0],k=p[1],y=Object(a.useState)(void 0),A=Object(l.a)(y,2),P=A[0],w=A[1];Object(a.useEffect)((function(){S.download(m.baseBundle).then(Object(u.a)(i.a.mark((function e(){var t,n,a,s,o,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URL(document.location.toString()).searchParams,n=void 0,!t.has("code")){e.next=6;break}n=t.get("code"),e.next=9;break;case 6:return e.next=8,S.readFile(m.CodePath);case 8:n=e.sent;case 9:if(a=!1,!n){e.next=21;break}if(k(n),!t.has("exec")){e.next=21;break}if(!((s=m.actions.findIndex((function(e){var n;return e.label.toLowerCase()===(null===(n=t.get("exec"))||void 0===n?void 0:n.toLowerCase())})))>=0)){e.next=21;break}return o=m.actions[s],e.next=18,S.getBundle(o.command,{path:o.CodeDestination,text:n});case 18:c=e.sent,w(c),a=!0;case 21:if(!1!==a){e.next=26;break}return e.next=24,S.getBundle();case 24:r=e.sent,w(r);case 26:case"end":return e.stop()}}),e)}))))}),[m,t.envBaseCode]);var z=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.actions[t],e.next=3,S.getBundle(n.command,{path:n.CodeDestination,text:j});case 3:(a=e.sent)&&w(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"ground-Container",children:[Object(h.jsx)("div",{className:"ground-selectors",children:Object(h.jsx)("div",{style:{float:"left"},children:Object(h.jsxs)(x.a,{children:[Object(h.jsx)(C.a,{id:"select-jsdos-bundle-label",children:"environment"}),Object(h.jsx)(g.a,{labelId:"select-jsdos-bundle",id:"select-bundle",value:c,onChange:function(e){r(e.target.value)},children:d.a.map((function(e,t){return Object(h.jsx)(O.a,{value:t,children:e.label},e.label)}))})]})})}),Object(h.jsx)("div",{className:"ground-buttons",children:Object(h.jsx)(H,{baseOptions:["clean"],options:m.actions.map((function(e){return e.label})),onClick:function(e){return e<0?k(""):z(e)}})}),Object(h.jsx)("div",{className:"ground-dosbox",children:void 0!==P?Object(h.jsx)(v,{bundle:P}):Object(h.jsx)(h.Fragment,{})}),Object(h.jsx)("div",{className:"ground-editor",children:Object(h.jsx)(T.a,{autoFocus:!0,value:j,language:b,placeholder:"Please enter your code.",onChange:function(e){return k(e.target.value)},minHeight:80,padding:15,style:{fontSize:12,backgroundColor:"#f5f5f5",fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace"}})})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,486)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),o(e),c(e)}))};c.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(D,{})}),document.getElementById("root")),B()},69:function(e){e.exports=JSON.parse('{"a":[{"label":"MASM 6.11","description":"Microsoft Macro Assembler with MASM.exe 5.00 link.exe 3.60","baseBundle":"/bundles/MASM-v6.11.jsdos","CodeLanguage":"nasm","CodePath":"code/hello.asm","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","test.exe"]},{"label":"debug","zh-cn":"\u4f7f\u7528debug\u8c03\u8bd5","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","debug test.exe"]},{"label":"list","zh-cn":"\u751f\u6210lst\u6587\u4ef6","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm /la test.asm;","type test.lst"]}]},{"label":"MASM 5.00","description":"Microsoft Macro Assembler with MASM.exe 5.00 link.exe 3.60","baseBundle":"/bundles/MASM-v5.00.jsdos","CodeLanguage":"nasm","CodePath":"code/hello.asm","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","test.exe"]},{"label":"debug","zh-cn":"\u4f7f\u7528debug\u8c03\u8bd5","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm test.asm;","link test.obj;","debug test.exe"]},{"label":"list","zh-cn":"\u751f\u6210lst\u6587\u4ef6","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\masm;%PATH%","d:","masm /la test.asm;","type test.lst"]}]},{"label":"TASM 4.1","description":"Borland\'s Turbo Assembler with tasm.exe 4.1 tlink.exe 7.1.30.1","baseBundle":"/bundles/TASM.jsdos","CodeLanguage":"nasm","CodePath":"code/hello.asm","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\tasm;%PATH%","d:","tasm test.asm;","tlink test.obj;","test.exe"]},{"label":"debug","zh-cn":"\u4f7f\u7528TD\u8c03\u8bd5","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\tasm;%PATH%","d:","tasm /zi test.asm","tlink /v/3 test.obj","TD test.exe"]},{"label":"list","zh-cn":"\u751f\u6210lst\u6587\u4ef6","CodeDestination":"test/test.asm","command":["mount c ./","mount d ./test/","set PATH=C:\\\\tasm;%PATH%","d:","tasm /la test.asm;","type test.lst"]}]},{"label":"Turbo C 2.0(T)","description":"Turbo C 2.0 Compile code in Text Mode. From Gabriel Ortiz(gabrielortizamador@gmail.com)","baseBundle":"/bundles/TurboC.jsdos","CodeLanguage":"C","CodePath":"Code/Text.c","actions":[{"label":"run","zh-cn":"\u8fd0\u884c\u4ee3\u7801","CodeDestination":"test/test.c","command":["mount c ./","mount d ./test/","d:","set PATH=C:\\\\TC;%PATH%","tcc Text.c","tcc -Ic:\\\\tc\\\\ -Lc:\\\\tc\\\\ d:test","test.exe"]}]},{"label":"Turbo C 2.0(G)","description":"Turbo C 2.0 Compile code in Graph Mode. From Gabriel Ortiz(gabrielortizamador@gmail.com)","baseBundle":"/bundles/TurboC.jsdos","CodeLanguage":"C","CodePath":"Code/Graphic.c","actions":[{"label":"run","zh-cn":"\u4f7f\u7528TD\u8c03\u8bd5","CodeDestination":"test/test.c","command":["mount c ./","mount d ./test/","set PATH=C:\\\\TC;%PATH%","d:","tcc -Ic:\\\\tc\\\\ -Lc:\\\\tc\\\\ d:\\\\test c:\\\\tc\\\\graphics.lib","test.exe"]}]}]}')}},[[441,1,2]]]);
//# sourceMappingURL=main.01c39697.chunk.js.map